<!-- Component/Key -->
@using Wordle.Model
@using Wordle.ViewModel.Classes
@inject GameManager gameManager

<!-- HTML -->
<button class="key @CssClasses" @onclick="@OnClickHandler" maxlength="1"> @Letter </button>

<!-- CSS -->

<!-- CODE -->
@code {
    [Parameter]
    public int RowIndex { get; set; }

    [Parameter]
    public int ColumnIndex { get; set; }

    [Parameter]
    public string? CssClasses { get; set; }

    [Parameter]
    public EventCallback OnClickFinished { get; set; }

    [Parameter]
    public ElementReference[] KeyRef { get; set; }

    private string? Letter { get; set; }

    private async Task ClickFinished()
    {
        //Invocation
        await OnClickFinished.InvokeAsync();
    }

    private async void OnClickHandler( MouseEventArgs e)
    {
        //first part of if --> ColumnIndex == gameManager.NumberColumns - 1 &&
        //e.Button 0 --> left mouse button
        if( Letter != string.Empty && e.Button == 0 )
        {
            await ClickFinished();
        }
    }
}
